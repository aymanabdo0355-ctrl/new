--[[ 
    Xes Hub - ABA Script
    UI: Rayfield
    Complete Version with Farm Overlay + Gold Farm + Exploits
    FIXES: Auto M1, Rematch Spam, Ban Skipping
]] 

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Debris = game:GetService("Debris")
local VirtualInputManager = game:GetService("VirtualInputManager")

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local isAltAccount = false
local isMainAccount = false
local desyncEnabled = false
local desyncActive = false
local Connections = {}
local webhookUrl = ""
local autoSkipBansEnabled = true

-- Farm Statistics
local FarmStats = {
    StartTime = 0,
    StartLevel = 0,
    StartMoney = 0,
    CurrentLevel = 0,
    CurrentMoney = 0,
    LevelsGained = 0,
    MoneyGained = 0
}

-- Anti-AFK
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Auto Rematch - FIXED: Always active, ultra aggressive continuous spamming
task.spawn(function()
    while task.wait(0.1) do -- Very fast spamming every 0.1 seconds
        pcall(function()
            -- Try multiple possible rematch remote names
            local rematchEvent = ReplicatedStorage:FindFirstChild("RematchVote")
            if rematchEvent then
                rematchEvent:FireServer()
            end
            
            local rematch = ReplicatedStorage:FindFirstChild("Rematch")
            if rematch then
                rematch:FireServer()
            end
            
            local voteRematch = ReplicatedStorage:FindFirstChild("VoteRematch")
            if voteRematch then
                voteRematch:FireServer()
            end
        end)
    end
end)

local function GetPlayerLevel()
    local success, level = pcall(function()
        local hudGui = LocalPlayer.PlayerGui:FindFirstChild("HUD")
        if not hudGui then return 0 end
        
        local lvlLabel = hudGui:FindFirstChild("Lvl")
        if not lvlLabel or not lvlLabel.Text then return 0 end
        
        -- Extract number from text like "Lvl 25" or "25"
        local levelNum = lvlLabel.Text:match("%d+")
        return tonumber(levelNum) or 0
    end)
    
    if success then
        return level
    else
        return 0
    end
end

local function GetPlayerMoney()
    local success, money = pcall(function()
        -- Try multiple possible paths for the money UI element
        local hudGui = LocalPlayer.PlayerGui:FindFirstChild("HUD")
        if not hudGui then return 0 end
        
        -- Try Money.Money.Text path
        local moneyFrame = hudGui:FindFirstChild("Money")
        if moneyFrame then
            local moneyLabel = moneyFrame:FindFirstChild("Money")
            if moneyLabel and moneyLabel.Text then
                local cleanText = moneyLabel.Text:gsub(",", ""):gsub("%$", ""):gsub("%s", "")
                return tonumber(cleanText) or 0
            end
        end
        
        -- Try direct Money text path
        if moneyFrame and moneyFrame.Text then
            local cleanText = moneyFrame.Text:gsub(",", ""):gsub("%$", ""):gsub("%s", "")
            return tonumber(cleanText) or 0
        end
        
        return 0
    end)
    
    if success then
        return money
    else
        return 0
    end
end

local function FormatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local secs = math.floor(seconds % 60)
    
    if hours > 0 then
        return string.format("%dh %dm", hours, minutes)
    elseif minutes > 0 then
        return string.format("%dm %ds", minutes, secs)
    else
        return string.format("%ds", secs)
    end
end

local function FormatNumber(num)
    if num >= 1000000 then
        return string.format("%.1fM", num / 1000000)
    elseif num >= 1000 then
        return string.format("%.1fK", num / 1000)
    else
        return tostring(num)
    end
end

local function SendWebhook(title, description, color)
    if webhookUrl == "" or webhookUrl == "YOUR_WEBHOOK_URL_HERE" then return end
    
    local data = {
        ["embeds"] = {{
            ["title"] = title,
            ["description"] = description,
            ["color"] = color,
            ["footer"] = {
                ["text"] = os.date("%I:%M %p")
            }
        }}
    }
    
    pcall(function()
        local jsonData = HttpService:JSONEncode(data)
        request({
            Url = webhookUrl,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = jsonData
        })
    end)
end

local function SendFarmWebhook()
    if webhookUrl == "" or webhookUrl == "YOUR_WEBHOOK_URL_HERE" then return end
    
    local runtime = os.time() - FarmStats.StartTime
    local accountType = isMainAccount and "main" or "alt"
    
    local description = string.format(
        "%s | %s\n\n" ..
        "lvl %d -> %d (+%d)\n" ..
        "$%s -> $%s (+$%s)\n\n" ..
        "uptime: %s",
        LocalPlayer.Name,
        accountType,
        FarmStats.StartLevel,
        FarmStats.CurrentLevel,
        FarmStats.LevelsGained,
        FormatNumber(FarmStats.StartMoney),
        FormatNumber(FarmStats.CurrentMoney),
        FormatNumber(FarmStats.MoneyGained),
        FormatTime(runtime)
    )
    
    SendWebhook("farm update", description, 3447003)
end

-- Create Farm Overlay UI
local FarmOverlay = nil

local function CreateFarmOverlay()
    if FarmOverlay then return end
    
    -- Create ScreenGui that covers EVERYTHING
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "XesFarmOverlay"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.DisplayOrder = 999999999
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Black background that covers entire screen
    local Background = Instance.new("Frame")
    Background.Name = "Background"
    Background.Size = UDim2.new(1, 0, 1, 0)
    Background.Position = UDim2.new(0, 0, 0, 0)
    Background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Background.BorderSizePixel = 0
    Background.ZIndex = 999999999
    Background.Parent = ScreenGui
    
    -- Stats display
    local StatsFrame = Instance.new("Frame")
    StatsFrame.Name = "StatsFrame"
    StatsFrame.Size = UDim2.new(0, 320, 0, 200)
    StatsFrame.Position = UDim2.new(0.5, -160, 0.5, -100)
    StatsFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    StatsFrame.BorderColor3 = Color3.fromRGB(40, 40, 40)
    StatsFrame.BorderSizePixel = 1
    StatsFrame.ZIndex = 1000000000
    StatsFrame.Parent = Background
    
    -- Username
    local Username = Instance.new("TextLabel")
    Username.Name = "Username"
    Username.Size = UDim2.new(1, -20, 0, 25)
    Username.Position = UDim2.new(0, 10, 0, 10)
    Username.BackgroundTransparency = 1
    Username.Text = LocalPlayer.Name
    Username.TextColor3 = Color3.fromRGB(180, 180, 180)
    Username.TextSize = 15
    Username.Font = Enum.Font.Code
    Username.TextXAlignment = Enum.TextXAlignment.Left
    Username.ZIndex = 1000000001
    Username.Parent = StatsFrame
    
    -- Mode indicator
    local Mode = Instance.new("TextLabel")
    Mode.Name = "Mode"
    Mode.Size = UDim2.new(1, -20, 0, 20)
    Mode.Position = UDim2.new(0, 10, 0, 35)
    Mode.BackgroundTransparency = 1
    Mode.Text = (isMainAccount and "main" or "alt")
    Mode.TextColor3 = Color3.fromRGB(120, 120, 120)
    Mode.TextSize = 13
    Mode.Font = Enum.Font.Code
    Mode.TextXAlignment = Enum.TextXAlignment.Left
    Mode.ZIndex = 1000000001
    Mode.Parent = StatsFrame
    
    -- Runtime
    local Runtime = Instance.new("TextLabel")
    Runtime.Name = "Runtime"
    Runtime.Size = UDim2.new(1, -20, 0, 22)
    Runtime.Position = UDim2.new(0, 10, 0, 70)
    Runtime.BackgroundTransparency = 1
    Runtime.Text = "0s"
    Runtime.TextColor3 = Color3.fromRGB(200, 200, 200)
    Runtime.TextSize = 16
    Runtime.Font = Enum.Font.Code
    Runtime.TextXAlignment = Enum.TextXAlignment.Left
    Runtime.ZIndex = 1000000001
    Runtime.Parent = StatsFrame
    
    -- Level display
    local LevelDisplay = Instance.new("TextLabel")
    LevelDisplay.Name = "LevelDisplay"
    LevelDisplay.Size = UDim2.new(1, -20, 0, 22)
    LevelDisplay.Position = UDim2.new(0, 10, 0, 105)
    LevelDisplay.BackgroundTransparency = 1
    LevelDisplay.Text = "lvl 0 -> 0 (+0)"
    LevelDisplay.TextColor3 = Color3.fromRGB(100, 255, 100)
    LevelDisplay.TextSize = 16
    LevelDisplay.Font = Enum.Font.Code
    LevelDisplay.TextXAlignment = Enum.TextXAlignment.Left
    LevelDisplay.ZIndex = 1000000001
    LevelDisplay.Parent = StatsFrame
    
    -- Money display
    local MoneyDisplay = Instance.new("TextLabel")
    MoneyDisplay.Name = "MoneyDisplay"
    MoneyDisplay.Size = UDim2.new(1, -20, 0, 22)
    MoneyDisplay.Position = UDim2.new(0, 10, 0, 135)
    MoneyDisplay.BackgroundTransparency = 1
    MoneyDisplay.Text = "$0 -> $0 (+$0)"
    MoneyDisplay.TextColor3 = Color3.fromRGB(255, 200, 50)
    MoneyDisplay.TextSize = 16
    MoneyDisplay.Font = Enum.Font.Code
    MoneyDisplay.TextXAlignment = Enum.TextXAlignment.Left
    MoneyDisplay.ZIndex = 1000000001
    MoneyDisplay.Parent = StatsFrame
    
    -- Bottom info
    local BottomInfo = Instance.new("TextLabel")
    BottomInfo.Name = "BottomInfo"
    BottomInfo.Size = UDim2.new(1, -20, 0, 18)
    BottomInfo.Position = UDim2.new(0, 10, 1, -28)
    BottomInfo.BackgroundTransparency = 1
    BottomInfo.Text = "webhook: 5min intervals"
    BottomInfo.TextColor3 = Color3.fromRGB(80, 80, 80)
    BottomInfo.TextSize = 11
    BottomInfo.Font = Enum.Font.Code
    BottomInfo.TextXAlignment = Enum.TextXAlignment.Center
    BottomInfo.ZIndex = 1000000001
    BottomInfo.Parent = StatsFrame
    
    ScreenGui.Parent = LocalPlayer.PlayerGui
    FarmOverlay = ScreenGui
    
    return ScreenGui
end

local function UpdateFarmOverlay()
    if not FarmOverlay then return end
    
    local runtime = os.time() - FarmStats.StartTime
    FarmStats.CurrentLevel = GetPlayerLevel()
    FarmStats.CurrentMoney = GetPlayerMoney()
    FarmStats.LevelsGained = FarmStats.CurrentLevel - FarmStats.StartLevel
    FarmStats.MoneyGained = FarmStats.CurrentMoney - FarmStats.StartMoney
    
    local StatsFrame = FarmOverlay.Background.StatsFrame
    
    StatsFrame.Runtime.Text = FormatTime(runtime)
    StatsFrame.LevelDisplay.Text = string.format("lvl %d -> %d (+%d)", 
        FarmStats.StartLevel, FarmStats.CurrentLevel, FarmStats.LevelsGained)
    StatsFrame.MoneyDisplay.Text = string.format("$%s -> $%s (+$%s)", 
        FormatNumber(FarmStats.StartMoney), FormatNumber(FarmStats.CurrentMoney), FormatNumber(FarmStats.MoneyGained))
end

local function RemoveFarmOverlay()
    if FarmOverlay then
        FarmOverlay:Destroy()
        FarmOverlay = nil
    end
end

-- Ranked Farm State
local MatchActive = false
local RankedFarmEnabled = false

-- Improved stats scraper
local function getFinalStats()
    local stats = { Money = "$0", Level = "0", Rank = "None", EmbedColor = 16711680 }
    local highestValueFound = -1
    
    for _, v in pairs(LocalPlayer.PlayerGui:GetDescendants()) do
        if v:IsA("TextLabel") and v.Visible and v.Text ~= "" then
            local t = v.Text
            
            -- Money: Find the actual highest number starting with $
            if t:match("^%$") then
                local numericPart = t:gsub("[^%d]", "")
                local n = tonumber(numericPart)
                if n and n > highestValueFound then
                    highestValueFound = n
                    stats.Money = t
                end
            elseif t:find("|") then
                local lvMatch = t:match("(%d+)")
                if lvMatch then
                    stats.Level = lvMatch
                    if (tonumber(lvMatch) or 0) >= 100 then stats.EmbedColor = 65280 end
                end
                local split = t:split("|")
                stats.Rank = split[2] and split[2]:gsub("^%s*", ""):gsub("%s*$", "") or "None"
            end
        end
    end
    return stats
end

-- Arena check
local function IsInArena()
    local char = LocalPlayer.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if not root then return false end
    
    local lobby = workspace:FindFirstChild("Lobby")
    if lobby then
        local lp = lobby:FindFirstChildWhichIsA("BasePart", true)
        if lp and (root.Position - lp.Position).Magnitude < 200 then return false end
    end
    return root.Position.Y < 450
end

-- Improved webhook sender
local function SendRankedWebhook()
    if webhookUrl == "" or webhookUrl == "YOUR_WEBHOOK_URL_HERE" then return end
    if not isMainAccount then return end -- Only main sends webhooks
    
    local requestFunc = (syn and syn.request) or (http and http.request) or (http_request) or (request)
    if not requestFunc then return end
    
    task.wait(1.5) -- Wait for money UI to update
    local stats = getFinalStats()
    
    pcall(function()
        requestFunc({
            Url = webhookUrl,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({
                ["embeds"] = {{
                    ["title"] = "ðŸ›¡ï¸ Character Selection: " .. LocalPlayer.Name,
                    ["color"] = stats.EmbedColor,
                    ["fields"] = {
                        {["name"] = "ðŸ’° Money", ["value"] = "**" .. stats.Money .. "**", ["inline"] = true},
                        {["name"] = "ðŸ“Š Level", ["value"] = "**" .. stats.Level .. "**", ["inline"] = true},
                        {["name"] = "ðŸŽ–ï¸ Rank", ["value"] = "**" .. stats.Rank .. "**", ["inline"] = false}
                    },
                    ["footer"] = {["text"] = "Server: " .. game.JobId},
                    ["thumbnail"] = {
                        ["url"] = "https://api.newstargeted.com/roblox/users/v1/avatar-headshot?userid=" .. LocalPlayer.UserId .. "&size=150x150&format=Png"
                    }
                }}
            })
        })
    end)
end

local function StartFarming()
    RankedFarmEnabled = true
    MatchActive = false
    
    -- Performance optimization for alt accounts
    if isAltAccount then
        RunService:Set3dRenderingEnabled(false)
    end
    
    -- Auto-join casual if in lobby
    if game.PlaceId == 2008032602 then
        task.spawn(function()
            task.wait(2)
            local casualInput = ReplicatedStorage:FindFirstChild('Input')
            if casualInput then
                casualInput:FireServer('CasualEnter')
            end
        end)
    end
    
    -- Setup UI Management with improved map banning
    if Connections['RankedFarmGUI'] then
        Connections['RankedFarmGUI']:Disconnect()
    end
    
    Connections['RankedFarmGUI'] = LocalPlayer.PlayerGui.ChildAdded:Connect(function(Child)
        -- Improved Map Ban
        if Child.Name == 'MapBan' then
            task.wait(0.5)
            local mapsFrame = Child:FindFirstChild("Maps", true)
            if mapsFrame then
                for _, mapObj in pairs(mapsFrame:GetChildren()) do
                    local title = mapObj:FindFirstChild("Title")
                    if title and title:IsA("TextLabel") then
                        ReplicatedStorage.MapBanner:FireServer(title.Text)
                    end
                end
            end
            
        elseif Child.Name == 'BanChooser' then
            MatchActive = false
            if isMainAccount then
                task.spawn(SendRankedWebhook)
            end
            
            local r = Child:FindFirstChild('Communicate', true)
            if r then r:FireServer('pass') end
            
            task.wait(3)
            MatchActive = true
            
        elseif Child.Name == 'Rematch' then
            MatchActive = false
            task.wait(0.5)
            local rematchVote = ReplicatedStorage:FindFirstChild("RematchVote")
            if rematchVote then
                rematchVote:FireServer()
            end
        end
    end)
    
    -- Alt mode auto-death
    if isAltAccount then
        if Connections['AltAutoDeath'] then
            Connections['AltAutoDeath']:Disconnect()
        end
        
        Connections['AltAutoDeath'] = task.spawn(function()
            while RankedFarmEnabled and isAltAccount do
                task.wait(0.5)
                if MatchActive and IsInArena() then
                    local char = LocalPlayer.Character
                    local hum = char and char:FindFirstChildWhichIsA("Humanoid")
                    if hum and hum.Health > 0 then
                        hum.Health = 0
                        char:BreakJoints()
                    end
                end
            end
        end)
    end
end

local function StopFarming()
    RankedFarmEnabled = false
    MatchActive = false
    
    -- Re-enable 3D rendering
    RunService:Set3dRenderingEnabled(true)
    
    if Connections['RankedFarmGUI'] then
        Connections['RankedFarmGUI']:Disconnect()
        Connections['RankedFarmGUI'] = nil
    end
    
    if Connections['AltAutoDeath'] then
        pcall(function() task.cancel(Connections['AltAutoDeath']) end)
        Connections['AltAutoDeath'] = nil
    end
end

local function EnableDesync()
    if desyncActive then return end
    local success = pcall(function() setfflag("NextGenReplicatorEnabledWrite4", "True") end)
    if success then
        task.wait(0.1)
        local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then humanoid:ChangeState(Enum.HumanoidStateType.Dead) end
        
        if Connections['DesyncRespawn'] then Connections['DesyncRespawn']:Disconnect() end
        Connections['DesyncRespawn'] = LocalPlayer.CharacterAdded:Connect(function(newCharacter)
            if not desyncEnabled then
                if Connections['DesyncRespawn'] then
                    Connections['DesyncRespawn']:Disconnect()
                    Connections['DesyncRespawn'] = nil
                end
                return
            end
            task.wait(0.5)
            pcall(function() setfflag("NextGenReplicatorEnabledWrite4", "False") end)
            task.wait(0.1)
            pcall(function() setfflag("NextGenReplicatorEnabledWrite4", "True") end)
            desyncActive = true
        end)
    else
        desyncEnabled = false
        return false
    end
    return true
end

local function DisableDesync()
    desyncEnabled, desyncActive = false, false
    if Connections['DesyncRespawn'] then
        Connections['DesyncRespawn']:Disconnect()
        Connections['DesyncRespawn'] = nil
    end
    pcall(function() setfflag("NextGenReplicatorEnabledWrite4", "False") end)
    
    -- Only reset character if gold farm is not active
    if not goldFarmEnabled then
        task.wait(0.1)
        local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
        if humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.Dead)
        end
    end
end

local function ResetCharacter()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Dead)
    end
end

-- Auto Skip Bans Function - FIXED: More aggressive checking
local function SetupAutoSkipBans()
    task.spawn(function()
        task.wait(2)
        local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
        
        if Connections['AutoSkipBans'] then
            Connections['AutoSkipBans']:Disconnect()
        end
        
        -- ChildAdded connection
        Connections['AutoSkipBans'] = PlayerGui.ChildAdded:Connect(function(Child)
            if not autoSkipBansEnabled then return end
            
            task.wait(0.1)
            
            pcall(function()
                if Child.Name == 'BanChooser' then
                    local RemoteEvent = Child:FindFirstChild('Communicate', true)
                    if RemoteEvent then
                        RemoteEvent:FireServer('pass')
                        print("[xes] auto-skipped character ban")
                    end
                elseif Child.Name == 'MapBan' then
                    task.wait(.5)
                    for _, v in pairs(Child.Frame.Maps:GetChildren()) do
                        if v:FindFirstChild('Title') then
                            local MapBanner = ReplicatedStorage:FindFirstChild("MapBanner")
                            if MapBanner then
                                MapBanner:FireServer(v.Title.Text)
                                print("[xes] auto-skipped map ban")
                            end
                            break
                        end
                    end
                end
            end)
        end)
        
        -- Additional continuous check every 0.5 seconds
        task.spawn(function()
            while task.wait(0.5) do
                if not autoSkipBansEnabled then continue end
                
                pcall(function()
                    -- Check for BanChooser
                    local banChooser = PlayerGui:FindFirstChild('BanChooser')
                    if banChooser then
                        local RemoteEvent = banChooser:FindFirstChild('Communicate', true)
                        if RemoteEvent then
                            RemoteEvent:FireServer('pass')
                            print("[xes] auto-skipped character ban (continuous check)")
                        end
                    end
                    
                    -- Check for MapBan
                    local mapBan = PlayerGui:FindFirstChild('MapBan')
                    if mapBan then
                        task.wait(0.5)
                        for _, v in pairs(mapBan.Frame.Maps:GetChildren()) do
                            if v:FindFirstChild('Title') then
                                local MapBanner = ReplicatedStorage:FindFirstChild("MapBanner")
                                if MapBanner then
                                    MapBanner:FireServer(v.Title.Text)
                                    print("[xes] auto-skipped map ban (continuous check)")
                                end
                                break
                            end
                        end
                    end
                end)
            end
        end)
    end)
end

print("[xes] loaded")

local Window = Rayfield:CreateWindow({
    Name = "xes hub",
    LoadingTitle = "xes hub",
    LoadingSubtitle = "by xes",
    Theme = "Default",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "xes_hub",
        FileName = "config"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = false
    },
    KeySystem = false
})

-- Create Tabs
local MainTab = Window:CreateTab("ranked farm", 4483362458)
local GoldFarmTab = Window:CreateTab("gold farm", 4483362458)
local ExploitsTab = Window:CreateTab("exploits", 4483362458)
local PerfectTimingTab = Window:CreateTab("perfect timing", 4483362458)
local MiscTab = Window:CreateTab("misc", 4483362458)
local SettingsTab = Window:CreateTab("settings", 4483362458)

-- RANKED FARM TAB
local FarmModesSection = MainTab:CreateSection("Farm Modes")

local MainToggle = MainTab:CreateToggle({
    Name = "Main Account Mode",
    CurrentValue = false,
    Flag = "MainMode",
    Callback = function(Value)
        isMainAccount = Value
        
        if Value then
            isAltAccount = false
            StartFarming()
        else
            StopFarming()
        end
    end,
})

local AltToggle = MainTab:CreateToggle({
    Name = "Alt Account Mode",
    CurrentValue = false,
    Flag = "AltMode",
    Callback = function(Value)
        isAltAccount = Value
        
        if Value then
            isMainAccount = false
            StartFarming()
        else
            StopFarming()
        end
    end,
})

local InfoSection = MainTab:CreateSection("Information")
local InfoLabel1 = MainTab:CreateLabel("main mode: normal gameplay")
local InfoLabel2 = MainTab:CreateLabel("alt mode: dies in arena automatically")
local InfoLabel3 = MainTab:CreateLabel("webhook: sends stats after each match")

local WebhookSection = MainTab:CreateSection("Webhook")

local WebhookInput = MainTab:CreateInput({
    Name = "Discord Webhook URL",
    PlaceholderText = "https://discord.com/api/webhooks/...",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        webhookUrl = Text
        print("[xes] webhook set")
    end,
})

local WebhookTestButton = MainTab:CreateButton({
    Name = "Test Webhook",
    Callback = function()
        if webhookUrl == "" or webhookUrl == "YOUR_WEBHOOK_URL_HERE" then
            print("[xes] no webhook set")
        else
            SendRankedWebhook()
        end
    end,
})

local NetworkSection = MainTab:CreateSection("Network Settings")

local DesyncToggle = MainTab:CreateToggle({
    Name = "desync (needed for gold farm)",
    CurrentValue = false,
    Flag = "Desync",
    Callback = function(Value)
        desyncEnabled = Value
        if Value then
            EnableDesync()
        else
            DisableDesync()
        end
    end,
})


local RenderSection = SettingsTab:CreateSection("performance")

local Render3DToggle = SettingsTab:CreateToggle({
    Name = "disable 3d render",
    CurrentValue = false,
    Flag = "Render3D",
    Callback = function(Value)
        if Value then
            RunService:Set3dRenderingEnabled(false)
            print("[xes] 3d rendering off")
        else
            RunService:Set3dRenderingEnabled(true)
            print("[xes] 3d rendering on")
        end
    end,
})

local InfoSection = SettingsTab:CreateSection("info")
local InfoLabel = SettingsTab:CreateLabel("afk bypass: active")
local InfoLabel2 = SettingsTab:CreateLabel("auto rematch: active")
local InfoLabel3 = SettingsTab:CreateLabel("auto skip bans: active")

local DebugSection = SettingsTab:CreateSection("debug")

local DebugButton = SettingsTab:CreateButton({
    Name = "Print UI Structure",
    Callback = function()
        pcall(function()
            local hudGui = LocalPlayer.PlayerGui:FindFirstChild("HUD")
            if hudGui then
                print("[xes] HUD found!")
                print("[xes] HUD children:")
                for _, child in pairs(hudGui:GetChildren()) do
                    print("  - " .. child.Name .. " (" .. child.ClassName .. ")")
                    if child:IsA("Frame") or child:IsA("TextLabel") then
                        for _, subchild in pairs(child:GetChildren()) do
                            print("    - " .. subchild.Name .. " (" .. subchild.ClassName .. ")")
                            if subchild:IsA("TextLabel") and subchild.Text then
                                print("      Text: " .. subchild.Text)
                            end
                        end
                        if child:IsA("TextLabel") and child.Text then
                            print("    Text: " .. child.Text)
                        end
                    end
                end
                
                local currentLevel = GetPlayerLevel()
                local currentMoney = GetPlayerMoney()
                print("[xes] Current Level: " .. currentLevel)
                print("[xes] Current Money: " .. currentMoney)
            else
                print("[xes] HUD not found!")
            end
        end)
    end,
})

local SkipBansSection = SettingsTab:CreateSection("automation")

local AutoSkipBansToggle = SettingsTab:CreateToggle({
    Name = "skip bans",
    CurrentValue = true,
    Flag = "SkipBans",
    Callback = function(Value)
        autoSkipBansEnabled = Value
    end,
})

local ConfigSection = SettingsTab:CreateSection("config")

local SaveConfigButton = SettingsTab:CreateButton({
    Name = "save config",
    Callback = function()
        local config = {
            -- Ranked Farm
            MainMode = isMainAccount,
            AltMode = isAltAccount,
            DesyncEnabled = desyncEnabled,
            WebhookUrl = webhookUrl,
            
            -- Projectiles
            CharacterProjectiles = characterProjectiles,
            
            -- Perfect Timing
            -- (These reset on script reload, can't save connection states)
            
            -- Misc
            AntiSnail = Connections['AntiSnail'] ~= nil,
            AutoSkipBans = autoSkipBansEnabled,
            
            -- Gold Farm
            GoldFarmEnabled = goldFarmEnabled,
            LockOnEnabled = lockOnEnabled,
            AutoAttackEnabled = autoAttackEnabled,
            AutoGEnabled = autoGEnabled,
            SelectedTarget = selectedTarget,
            FarmDistance = farmDistance,
            HeightOffset = heightOffset,
            AutoSkill1 = autoSkill1,
            AutoSkill2 = autoSkill2,
            AutoSkill3 = autoSkill3,
            AutoSkill4 = autoSkill4,
            Skill1Distance = skill1Distance,
            Skill2Distance = skill2Distance,
            Skill3Distance = skill3Distance,
            Skill4Distance = skill4Distance,
        }
        
        local success, err = pcall(function()
            writefile("xes_hub_config.json", HttpService:JSONEncode(config))
        end)
        
        if success then
            print("[xes] config saved")
        else
            print("[xes] failed to save:", err)
        end
    end,
})

local LoadConfigButton = SettingsTab:CreateButton({
    Name = "load config",
    Callback = function()
        if not isfile("xes_hub_config.json") then
            print("[xes] no config found")
            return
        end
        
        local success, result = pcall(function()
            return HttpService:JSONDecode(readfile("xes_hub_config.json"))
        end)
        
        if success and result then
            -- Load values
            webhookUrl = result.WebhookUrl or ""
            autoSkipBansEnabled = result.AutoSkipBans or false
            
            -- Load character projectiles
            if result.CharacterProjectiles then
                for key, value in pairs(result.CharacterProjectiles) do
                    characterProjectiles[key] = value
                end
            end
            
            -- Load gold farm settings
            goldFarmEnabled = result.GoldFarmEnabled or false
            lockOnEnabled = result.LockOnEnabled or false
            autoAttackEnabled = result.AutoAttackEnabled or false
            autoGEnabled = result.AutoGEnabled or false
            selectedTarget = result.SelectedTarget or "Nearest Player"
            farmDistance = result.FarmDistance or 6
            heightOffset = result.HeightOffset or 2
            autoSkill1 = result.AutoSkill1 or false
            autoSkill2 = result.AutoSkill2 or false
            autoSkill3 = result.AutoSkill3 or false
            autoSkill4 = result.AutoSkill4 or false
            skill1Distance = result.Skill1Distance or 50
            skill2Distance = result.Skill2Distance or 50
            skill3Distance = result.Skill3Distance or 50
            skill4Distance = result.Skill4Distance or 50
            
            print("[xes] config loaded")
        else
            print("[xes] failed to load:", result)
        end
    end,
})

local DeleteConfigButton = SettingsTab:CreateButton({
    Name = "delete config",
    Callback = function()
        if isfile("xes_hub_config.json") then
            delfile("xes_hub_config.json")
            print("[xes] config deleted")
        else
            print("[xes] no config to delete")
        end
    end,
})

-- Gold Farm Tab

-- GOLD FARM TAB
local GoldFarmWarningSection = GoldFarmTab:CreateSection("")
local GoldFarmWarning = GoldFarmTab:CreateLabel("enable desync first")

local TargetSection = GoldFarmTab:CreateSection("target")

-- Variables for Gold Farm
local goldFarmEnabled = false
local lockOnEnabled = false
local autoAttackEnabled = false
local autoGEnabled = false
local selectedTarget = "Nearest Player"
local farmDistance = 6
local heightOffset = 2

-- Auto Skills
local autoSkill1 = false
local autoSkill2 = false
local autoSkill3 = false
local autoSkill4 = false

local skill1Distance = 50
local skill2Distance = 50
local skill3Distance = 50
local skill4Distance = 50

-- Helper Functions
local function getPlayerDistance(player1, player2)
    if not (player1 and player1.Character and player1.Character:FindFirstChild("HumanoidRootPart")) then
        return math.huge
    end
    if not (player2 and player2.Character and player2.Character:FindFirstChild("HumanoidRootPart")) then
        return math.huge
    end
    
    return (player1.Character.HumanoidRootPart.Position - player2.Character.HumanoidRootPart.Position).Magnitude
end

local function getNearestPlayer()
    local nearestPlayer = nil
    local shortestDistance = math.huge
    
    for _, player in pairs(Players:GetPlayers()) do
        if player == LocalPlayer then continue end
        if not player.Character then continue end
        if not player.Character:FindFirstChild("Humanoid") then continue end
        if player.Character.Humanoid.Health <= 0 then continue end
        if not player.Character:FindFirstChild("HumanoidRootPart") then continue end
        
        -- Skip teammates if applicable
        if player.Team == LocalPlayer.Team and LocalPlayer.Team ~= nil then continue end
        
        local distance = getPlayerDistance(LocalPlayer, player)
        if distance < shortestDistance then
            nearestPlayer = player
            shortestDistance = distance
        end
    end
    
    return nearestPlayer
end

local function getTargetPlayer()
    if selectedTarget == "Nearest Player" then
        return getNearestPlayer()
    else
        -- Find specific player by name
        for _, player in pairs(Players:GetPlayers()) do
            if player.Name == selectedTarget then
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    if player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                        return player
                    end
                end
            end
        end
    end
    return nil
end

local function moveToTarget(target)
    if not (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) then
        return
    end
    if not (target.Character and target.Character:FindFirstChild("HumanoidRootPart")) then
        return
    end
    
    local targetPos = target.Character.HumanoidRootPart.CFrame
    LocalPlayer.Character.HumanoidRootPart.CFrame = targetPos * CFrame.new(0, heightOffset, farmDistance)
end

local function lookAtTarget(target)
    if not (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) then
        return
    end
    if not (target.Character and target.Character:FindFirstChild("HumanoidRootPart")) then
        return
    end
    
    local Camera = workspace.CurrentCamera
    local targetPos = target.Character.HumanoidRootPart.Position
    Camera.CFrame = CFrame.lookAt(Camera.CFrame.Position, targetPos)
end

-- FIXED: Auto Attack now uses proper remote instead of mouse1press
local function attackTarget()
    pcall(function()
        if LocalPlayer.Character then
            local mouseHitCFrame = workspace.CurrentCamera.CFrame
            if LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                mouseHitCFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -3)
            end
            
            local args = {
                "truem1",
                {
                    md = Vector3.zero,
                    skeyreal = false,
                    skeydown = true,
                    mousehit = mouseHitCFrame,
                    dodgevelo = Vector3.zero,
                    air = false
                }
            }
            
            local ServerTraits = LocalPlayer:WaitForChild("Backpack"):FindFirstChild("ServerTraits")
            if ServerTraits then
                local Input = ServerTraits:FindFirstChild("Input")
                if Input then
                    Input:FireServer(unpack(args))
                end
            end
        end
    end)
end

local function spamG()
    pcall(function()
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.G, false, game)
        task.wait(0.05)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.G, false, game)
    end)
end

local function useSkill(skillNumber)
    local keyMap = {
        [1] = "One",
        [2] = "Two",
        [3] = "Three",
        [4] = "Four"
    }
    
    local key = keyMap[skillNumber]
    if key then
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode[key], false, game)
        task.wait(0.1)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode[key], false, game)
    end
end

-- Build player list
local playerList = {"Nearest Player"}
for _, player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        table.insert(playerList, player.Name)
    end
end

local TargetDropdown = GoldFarmTab:CreateDropdown({
    Name = "target",
    Options = playerList,
    CurrentOption = "Nearest Player",
    Flag = "TargetPlayer",
    Callback = function(Option)
        selectedTarget = Option
    end,
})

local RefreshButton = GoldFarmTab:CreateButton({
    Name = "refresh players",
    Callback = function()
        playerList = {"Nearest Player"}
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                table.insert(playerList, player.Name)
            end
        end
        
        TargetDropdown:Set(playerList)
        print("[xes] player list refreshed")
    end,
})

local FarmSettingsSection = GoldFarmTab:CreateSection("settings")

local DistanceSlider = GoldFarmTab:CreateSlider({
    Name = "distance",
    Range = {0, 15},
    Increment = 1,
    CurrentValue = 6,
    Flag = "FarmDistance",
    Callback = function(Value)
        farmDistance = Value
    end,
})

local HeightSlider = GoldFarmTab:CreateSlider({
    Name = "height offset",
    Range = {0, 15},
    Increment = 1,
    CurrentValue = 2,
    Flag = "HeightOffset",
    Callback = function(Value)
        heightOffset = Value
    end,
})

local FarmControlSection = GoldFarmTab:CreateSection("control")

local GoldFarmToggle = GoldFarmTab:CreateToggle({
    Name = "auto farm",
    CurrentValue = false,
    Flag = "GoldFarm",
    Callback = function(Value)
        goldFarmEnabled = Value
        
        if Value then
            if not desyncEnabled then
                print("[xes] warning: desync not enabled!")
            end
            
            -- Start farm loop
            if Connections['GoldFarm'] then
                Connections['GoldFarm']:Disconnect()
            end
            
            Connections['GoldFarm'] = RunService.RenderStepped:Connect(function()
                if not goldFarmEnabled then return end
                
                local target = getTargetPlayer()
                if target then
                    moveToTarget(target)
                    
                    local distance = getPlayerDistance(LocalPlayer, target)
                    
                    -- Auto skills based on distance
                    if autoSkill1 and distance <= skill1Distance then
                        useSkill(1)
                    end
                    if autoSkill2 and distance <= skill2Distance then
                        useSkill(2)
                    end
                    if autoSkill3 and distance <= skill3Distance then
                        useSkill(3)
                    end
                    if autoSkill4 and distance <= skill4Distance then
                        useSkill(4)
                    end
                end
            end)
        else
            -- Stop farm loop
            if Connections['GoldFarm'] then
                Connections['GoldFarm']:Disconnect()
                Connections['GoldFarm'] = nil
            end
        end
    end,
})

local LockOnToggle = GoldFarmTab:CreateToggle({
    Name = "lock on target",
    CurrentValue = false,
    Flag = "LockOn",
    Callback = function(Value)
        lockOnEnabled = Value
        
        if Value then
            -- Start lock on loop
            if Connections['LockOn'] then
                Connections['LockOn']:Disconnect()
            end
            
            Connections['LockOn'] = RunService.RenderStepped:Connect(function()
                if not lockOnEnabled then return end
                
                local target = getTargetPlayer()
                if target then
                    lookAtTarget(target)
                end
            end)
        else
            -- Stop lock on loop
            if Connections['LockOn'] then
                Connections['LockOn']:Disconnect()
                Connections['LockOn'] = nil
            end
        end
    end,
})

-- FIXED: Auto Attack uses proper remote instead of mouse1press
local AutoAttackToggle = GoldFarmTab:CreateToggle({
    Name = "auto attack (m1)",
    CurrentValue = false,
    Flag = "AutoAttack",
    Callback = function(Value)
        autoAttackEnabled = Value
        
        if Value then
            if Connections['AutoAttack'] then
                Connections['AutoAttack']:Disconnect()
            end
            
            Connections['AutoAttack'] = task.spawn(function()
                while autoAttackEnabled do
                    attackTarget() -- Uses the proper remote now
                    task.wait(0.1)
                end
            end)
        else
            if Connections['AutoAttack'] then
                pcall(function() task.cancel(Connections['AutoAttack']) end)
                Connections['AutoAttack'] = nil
            end
        end
    end,
})

local AutoGToggle = GoldFarmTab:CreateToggle({
    Name = "auto g",
    CurrentValue = false,
    Flag = "AutoG",
    Callback = function(Value)
        autoGEnabled = Value
        
        if Value then
            if Connections['AutoG'] then
                Connections['AutoG']:Disconnect()
            end
            
            Connections['AutoG'] = task.spawn(function()
                while autoGEnabled do
                    spamG()
                    task.wait(0.1)
                end
            end)
        else
            if Connections['AutoG'] then
                pcall(function() task.cancel(Connections['AutoG']) end)
                Connections['AutoG'] = nil
            end
        end
    end,
})

local SkillsSection = GoldFarmTab:CreateSection("skills")

local Skill1Toggle = GoldFarmTab:CreateToggle({
    Name = "skill 1",
    CurrentValue = false,
    Flag = "Skill1",
    Callback = function(Value)
        autoSkill1 = Value
    end,
})

local Skill1DistanceSlider = GoldFarmTab:CreateSlider({
    Name = "skill 1 distance",
    Range = {0, 100},
    Increment = 5,
    CurrentValue = 50,
    Flag = "Skill1Distance",
    Callback = function(Value)
        skill1Distance = Value
    end,
})

local Skill2Toggle = GoldFarmTab:CreateToggle({
    Name = "skill 2",
    CurrentValue = false,
    Flag = "Skill2",
    Callback = function(Value)
        autoSkill2 = Value
    end,
})

local Skill2DistanceSlider = GoldFarmTab:CreateSlider({
    Name = "skill 2 distance",
    Range = {0, 100},
    Increment = 5,
    CurrentValue = 50,
    Flag = "Skill2Distance",
    Callback = function(Value)
        skill2Distance = Value
    end,
})

local Skill3Toggle = GoldFarmTab:CreateToggle({
    Name = "skill 3",
    CurrentValue = false,
    Flag = "Skill3",
    Callback = function(Value)
        autoSkill3 = Value
    end,
})

local Skill3DistanceSlider = GoldFarmTab:CreateSlider({
    Name = "skill 3 distance",
    Range = {0, 100},
    Increment = 5,
    CurrentValue = 50,
    Flag = "Skill3Distance",
    Callback = function(Value)
        skill3Distance = Value
    end,
})

local Skill4Toggle = GoldFarmTab:CreateToggle({
    Name = "skill 4",
    CurrentValue = false,
    Flag = "Skill4",
    Callback = function(Value)
        autoSkill4 = Value
    end,
})

local Skill4DistanceSlider = GoldFarmTab:CreateSlider({
    Name = "skill 4 distance",
    Range = {0, 100},
    Increment = 5,
    CurrentValue = 50,
    Flag = "Skill4Distance",
    Callback = function(Value)
        skill4Distance = Value
    end,
})

-- Exploits Tab

local ExploitsInfoLabel = ExploitsTab:CreateLabel("These skills hit everyone on the map")

-- Projectile variables - always enabled
local characterProjectiles = {
    YusukeSpiritGun = false,
    YusukeDevilGun = false,
    DekuDelawareSmash = false,
    GojoHollowPurple = false,
    NarutoFireball = false,
    RengokuFlamingTiger = false,
    FireSkill = false,
    Misaka = false,
    Bakugo = false,
    KazumaSniper = false,
    BrolyEraser = false,
    GaaraTsunami = false,
    GaaraGreatTsunami = false,
    SinonArrow = false,
    GojoBlueUlt = false,
    AcceleratorQuake = false,
    AkainuFist = false,
    SuperDummyKillBlock = false,
    BrolyMeteor = false,
    JosephJeep = false,
    JosephBarrel = false,
    MrPresidentCocoJumbo = false,
    IchigoTSGetsuga = false,
    KisameShark = false,
    JosephHamon = false,
    OldJosephBarrel = false,
    OldJosephJeep = false,
    GrimjowPantherClaw = false,
    ItachiAmaterasu = false,
}

local function runProjectile(obj)
    local shouldManipulate = false
    
    -- Ball projectiles
    if obj.Name == "Ball" then
        if characterProjectiles.YusukeSpiritGun or 
           characterProjectiles.YusukeDevilGun or
           characterProjectiles.DekuDelawareSmash or
           characterProjectiles.GojoHollowPurple or
           characterProjectiles.NarutoFireball or
           characterProjectiles.RengokuFlamingTiger or
           characterProjectiles.AcceleratorQuake then
            shouldManipulate = true
        end
    -- Bal (Grimjow Panther Claw)
    elseif obj.Name == "Bal" and characterProjectiles.GrimjowPantherClaw then
        shouldManipulate = true
    -- Fist (Akainu)
    elseif obj.Name == "Fist" and characterProjectiles.AkainuFist then
        shouldManipulate = true
    -- Part (Super Dummy Kill Block)
    elseif obj.Name == "Part" and characterProjectiles.SuperDummyKillBlock then
        shouldManipulate = true
    -- Genki (Broly Meteor Shower)
    elseif obj.Name == "Genki" and characterProjectiles.BrolyMeteor then
        shouldManipulate = true
    -- Jeep (Joseph)
    elseif obj.Name == "Jeep" and characterProjectiles.JosephJeep then
        shouldManipulate = true
    -- Barrel (Joseph Barrel)
    elseif obj.Name == "Barrel" and characterProjectiles.JosephBarrel then
        shouldManipulate = true
    -- CocoJumbo (Mr President)
    elseif obj.Name == "CocoJumbo" and characterProjectiles.MrPresidentCocoJumbo then
        shouldManipulate = true
    -- NewGetsuga (Ichigo TS Getsuga)
    elseif obj.Name == "NewGetsuga" and characterProjectiles.IchigoTSGetsuga then
        shouldManipulate = true
    -- EraserBlow (Broly)
    elseif obj.Name == "EraserBlow" and characterProjectiles.BrolyEraser then
        shouldManipulate = true
    -- Fire Skills (Itachi/Shisui/Rengoku) - checks if name ends with "Fire"
    elseif obj.Name:match("Fire$") and characterProjectiles.FireSkill then
        shouldManipulate = true
    -- Coin (Misaka)
    elseif obj.Name == "Coin" and characterProjectiles.Misaka then
        shouldManipulate = true
    -- GauntletBlast (Bakugo)
    elseif obj.Name == "GauntletBlast" and characterProjectiles.Bakugo then
        shouldManipulate = true
    -- Soru
    elseif obj.Name == "Soru" then
        shouldManipulate = true
    -- Model
    elseif obj.Name == "Model" then
        shouldManipulate = true
    -- KazumaArrow (Kazuma)
    elseif obj.Name == "KazumaArrow" and characterProjectiles.KazumaSniper then
        shouldManipulate = true
    -- Tsunami (Gaara)
    elseif obj.Name == "Tsunami" and characterProjectiles.GaaraTsunami then
        shouldManipulate = true
    -- GreatTsunami (Gaara)
    elseif obj.Name == "GreatTsunami" and characterProjectiles.GaaraGreatTsunami then
        shouldManipulate = true
    -- SinonSmallArrow, Sniper1, Sniper2 (Sinon)
    elseif (obj.Name == "SinonSmallArrow" or obj.Name == "Sniper1" or obj.Name == "Sniper2") and characterProjectiles.SinonArrow then
        shouldManipulate = true
    -- GrabBallMax (Gojo Blue Ult)
    elseif obj.Name == "GrabBallMax" and characterProjectiles.GojoBlueUlt then
        shouldManipulate = true
    -- Shark (Kisame)
    elseif obj.Name == "Shark" and characterProjectiles.KisameShark then
        shouldManipulate = true
    -- HamonCap (Joseph)
    elseif obj.Name == "HamonCap" and characterProjectiles.JosephHamon then
        shouldManipulate = true
    -- Barrel (Old Joseph)
    elseif obj.Name == "Barrel" and characterProjectiles.OldJosephBarrel then
        shouldManipulate = true
    -- Jeep (Old Joseph)
    elseif obj.Name == "Jeep" and characterProjectiles.OldJosephJeep then
        shouldManipulate = true
    -- AmaterasuBall (Itachi)
    elseif obj.Name == "AmaterasuBall" and characterProjectiles.ItachiAmaterasu then
        shouldManipulate = true
    end
    
    if not shouldManipulate then return end

    for _, v in ipairs(obj:GetDescendants()) do
        if v:IsA("BodyVelocity") then
            v.Velocity = Vector3.zero
        end
    end

    if obj:IsA("BasePart") then
        obj.AssemblyLinearVelocity = Vector3.zero
        obj.AssemblyAngularVelocity = Vector3.zero
    end

    task.spawn(function()
        local Live = workspace:WaitForChild("Live")
        while obj.Parent do
            for _, target in ipairs(Live:GetChildren()) do
                if not obj.Parent then return end

                local hit = target:IsA("Model") and target.PrimaryPart or target:IsA("BasePart") and target

                if hit then
                    if obj:IsA("Model") then
                        obj:PivotTo(hit.CFrame)
                    else
                        obj.CFrame = hit.CFrame
                    end
                    task.wait()
                end
            end
        end
    end)
end

local function setupProjectileListener()
    if Connections['ProjectileListener'] then
        Connections['ProjectileListener']:Disconnect()
    end
    
    local Thrown = workspace:WaitForChild("Thrown")
    
    for _, obj in ipairs(Thrown:GetChildren()) do
        runProjectile(obj)
    end
    
    Connections['ProjectileListener'] = Thrown.ChildAdded:Connect(runProjectile)
end

setupProjectileListener()

local SpiritGunSection = ExploitsTab:CreateSection("Spirit Gun")

local YusukeToggle = ExploitsTab:CreateToggle({
    Name = "Yusuke Spirit Gun Auto Track",
    CurrentValue = false,
    Flag = "YusukeSpirit",
    Callback = function(Value)
        characterProjectiles.YusukeSpiritGun = Value
    end,
})

local DekuSection = ExploitsTab:CreateSection("Deku")

local DekuToggle = ExploitsTab:CreateToggle({
    Name = "Deku | Delaware Smash",
    CurrentValue = false,
    Flag = "DekuDelaware",
    Callback = function(Value)
        characterProjectiles.DekuDelawareSmash = Value
    end,
})

local GojoSection = ExploitsTab:CreateSection("Gojo")

local GojoToggle = ExploitsTab:CreateToggle({
    Name = "Gojo | Hollow Purple",
    CurrentValue = false,
    Flag = "GojoHollow",
    Callback = function(Value)
        characterProjectiles.GojoHollowPurple = Value
    end,
})

local FireSkillSection = ExploitsTab:CreateSection("Fire Skills")

local FireToggle = ExploitsTab:CreateToggle({
    Name = "Fire | Itachi | Shisui | Rengoku",
    CurrentValue = false,
    Flag = "FireSkill",
    Callback = function(Value)
        characterProjectiles.FireSkill = Value
    end,
})

local AmaterasuToggle = ExploitsTab:CreateToggle({
    Name = "Itachi | Amaterasu",
    CurrentValue = false,
    Flag = "ItachiAmaterasu",
    Callback = function(Value)
        characterProjectiles.ItachiAmaterasu = Value
    end,
})

local MisakaSection = ExploitsTab:CreateSection("Misaka")

local MisakaToggle = ExploitsTab:CreateToggle({
    Name = "Misaka | Coin (Bugged)",
    CurrentValue = false,
    Flag = "MisakaCoin",
    Callback = function(Value)
        characterProjectiles.Misaka = Value
    end,
})

local BakugoSection = ExploitsTab:CreateSection("Bakugo")

local BakugoToggle = ExploitsTab:CreateToggle({
    Name = "Bakugo | Gauntlet Blast",
    CurrentValue = false,
    Flag = "BakugoGauntlet",
    Callback = function(Value)
        characterProjectiles.Bakugo = Value
    end,
})

local BrolySection = ExploitsTab:CreateSection("Broly")

local BrolyToggle = ExploitsTab:CreateToggle({
    Name = "Broly | Eraser Blow",
    CurrentValue = false,
    Flag = "BrolyEraser",
    Callback = function(Value)
        characterProjectiles.BrolyEraser = Value
    end,
})

local KazumaSection = ExploitsTab:CreateSection("Kazuma")

local KazumaToggle = ExploitsTab:CreateToggle({
    Name = "Kazuma | Sniper Arrow",
    CurrentValue = false,
    Flag = "KazumaSniper",
    Callback = function(Value)
        characterProjectiles.KazumaSniper = Value
    end,
})

local GaaraSection = ExploitsTab:CreateSection("Gaara")

local GaaraToggle = ExploitsTab:CreateToggle({
    Name = "Gaara | Tsunami",
    CurrentValue = false,
    Flag = "GaaraTsunami",
    Callback = function(Value)
        characterProjectiles.GaaraTsunami = Value
    end,
})

local GaaraGreatToggle = ExploitsTab:CreateToggle({
    Name = "Gaara | Great Tsunami",
    CurrentValue = false,
    Flag = "GaaraGreatTsunami",
    Callback = function(Value)
        characterProjectiles.GaaraGreatTsunami = Value
    end,
})

local SinonSection = ExploitsTab:CreateSection("Sinon")

local SinonToggle = ExploitsTab:CreateToggle({
    Name = "Sinon | Small Arrow",
    CurrentValue = false,
    Flag = "SinonArrow",
    Callback = function(Value)
        characterProjectiles.SinonArrow = Value
    end,
})

local GojoBlueUltSection = ExploitsTab:CreateSection("Gojo Blue Ult")

local GojoBlueUltToggle = ExploitsTab:CreateToggle({
    Name = "Gojo | Blue Ult",
    CurrentValue = false,
    Flag = "GojoBlueUlt",
    Callback = function(Value)
        characterProjectiles.GojoBlueUlt = Value
    end,
})

local AcceleratorSection = ExploitsTab:CreateSection("Accelerator")

local AcceleratorToggle = ExploitsTab:CreateToggle({
    Name = "Accelerator | Quake",
    CurrentValue = false,
    Flag = "AcceleratorQuake",
    Callback = function(Value)
        characterProjectiles.AcceleratorQuake = Value
    end,
})

local AkainuSection = ExploitsTab:CreateSection("Akainu")

local AkainuToggle = ExploitsTab:CreateToggle({
    Name = "Akainu | Fist",
    CurrentValue = false,
    Flag = "AkainuFist",
    Callback = function(Value)
        characterProjectiles.AkainuFist = Value
    end,
})

local AkainuHitboxToggle = ExploitsTab:CreateToggle({
    Name = "Akainu | Fist Hitbox Expander",
    CurrentValue = false,
    Flag = "AkainuHitbox",
    Callback = function(Value)
        if Value then
            if Connections['AkainuHitbox'] then
                Connections['AkainuHitbox']:Disconnect()
            end
            
            local folder = workspace:WaitForChild("Thrown")
            
            Connections['AkainuHitbox'] = folder.ChildAdded:Connect(function(fist)
                if fist.Name == "Fist" and fist:IsA("MeshPart") then
                    -- MAX practical size (safe)
                    fist.Size = Vector3.new(2000, 2000, 2000)
                    
                    fist.Transparency = 1
                    fist.CanCollide = false
                    fist.CanTouch = true
                    fist.CanQuery = true
                    fist.Massless = true
                end
            end)
        else
            if Connections['AkainuHitbox'] then
                Connections['AkainuHitbox']:Disconnect()
                Connections['AkainuHitbox'] = nil
            end
        end
    end,
})

local SuperDummySection = ExploitsTab:CreateSection("Super Dummy")

local SuperDummyToggle = ExploitsTab:CreateToggle({
    Name = "Super Dummy | Kill Block",
    CurrentValue = false,
    Flag = "SuperDummyKillBlock",
    Callback = function(Value)
        characterProjectiles.SuperDummyKillBlock = Value
    end,
})

local BrolyMeteorSection = ExploitsTab:CreateSection("Broly Meteor")

local BrolyMeteorToggle = ExploitsTab:CreateToggle({
    Name = "Broly | Meteor Shower",
    CurrentValue = false,
    Flag = "BrolyMeteor",
    Callback = function(Value)
        characterProjectiles.BrolyMeteor = Value
    end,
})

local JosephSection = ExploitsTab:CreateSection("Joseph")

local JosephToggle = ExploitsTab:CreateToggle({
    Name = "Joseph | Jeep",
    CurrentValue = false,
    Flag = "JosephJeep",
    Callback = function(Value)
        characterProjectiles.JosephJeep = Value
    end,
})

local JosephBarrelToggle = ExploitsTab:CreateToggle({
    Name = "Joseph | Barrel",
    CurrentValue = false,
    Flag = "JosephBarrel",
    Callback = function(Value)
        characterProjectiles.JosephBarrel = Value
    end,
})

local BakugoInfDashSection = ExploitsTab:CreateSection("Bakugo Abilities")

local BakugoInfDashToggle = ExploitsTab:CreateToggle({
    Name = "Bakugo | Infinite Dash",
    CurrentValue = false,
    Flag = "BakugoInfDash",
    Callback = function(Value)
        if Value then
            if Connections['BakugoInfDash'] then
                Connections['BakugoInfDash']:Disconnect()
            end
            
            Connections['BakugoInfDash'] = task.spawn(function()
                while task.wait(0.1) do
                    if not Connections['BakugoInfDash'] then break end
                    
                    pcall(function()
                        local args = {
                            "dodge",
                            {
                                explod = Enum.KeyCode.W
                            }
                        }
                        LocalPlayer:WaitForChild("Backpack"):WaitForChild("ServerTraits"):WaitForChild("Input"):FireServer(unpack(args))
                    end)
                end
            end)
        else
            if Connections['BakugoInfDash'] then
                pcall(function() task.cancel(Connections['BakugoInfDash']) end)
                Connections['BakugoInfDash'] = nil
            end
        end
    end,
})

local NatsuInfDashToggle = ExploitsTab:CreateToggle({
    Name = "Natsu | Infinite Dash (Awakening)",
    CurrentValue = false,
    Flag = "NatsuInfDash",
    Callback = function(Value)
        if Value then
            if Connections['NatsuInfDash'] then
                Connections['NatsuInfDash']:Disconnect()
            end
            
            Connections['NatsuInfDash'] = task.spawn(function()
                while task.wait(0.1) do
                    if not Connections['NatsuInfDash'] then break end
                    
                    pcall(function()
                        local char = LocalPlayer.Character
                        if char and char:FindFirstChild("HumanoidRootPart") then
                            local hrp = char.HumanoidRootPart
                            
                            local args = {
                                "dodge",
                                {
                                    pos = hrp.CFrame
                                }
                            }
                            LocalPlayer:WaitForChild("Backpack"):WaitForChild("ServerTraits"):WaitForChild("Input"):FireServer(unpack(args))
                        end
                    end)
                end
            end)
        else
            if Connections['NatsuInfDash'] then
                pcall(function() task.cancel(Connections['NatsuInfDash']) end)
                Connections['NatsuInfDash'] = nil
            end
        end
    end,
})

local KisameSection = ExploitsTab:CreateSection("Kisame")

local KisameToggle = ExploitsTab:CreateToggle({
    Name = "Kisame | Shark",
    CurrentValue = false,
    Flag = "KisameShark",
    Callback = function(Value)
        characterProjectiles.KisameShark = Value
    end,
})

local GrimjowToggle = ExploitsTab:CreateToggle({
    Name = "Grimjow | Panther Claw",
    CurrentValue = false,
    Flag = "GrimjowPantherClaw",
    Callback = function(Value)
        characterProjectiles.GrimjowPantherClaw = Value
    end,
})

local NanamiSection = PerfectTimingTab:CreateSection("Nanami")

local NanamiBlackFlashToggle = PerfectTimingTab:CreateToggle({
    Name = "Nanami | Auto Black Flash",
    CurrentValue = false,
    Flag = "NanamiAutoBlackFlash",
    Callback = function(Value)
        if Value then
            local NanamiEvent = ReplicatedStorage:WaitForChild("NanamiCheck")
            local CutGUI = ReplicatedStorage:WaitForChild("NanamiCutGUI")
            local Live = workspace:WaitForChild('Live')
            
            NanamiEvent.OnClientInvoke = function(Target, TimeDur, User)
                local TempGUI = CutGUI:Clone()
                TempGUI.MainBar.Rotation = -80
                TempGUI.Parent = Live[Target.Name].HumanoidRootPart
                TempGUI.Adornee = Live[Target.Name].HumanoidRootPart
                local MainBar = TempGUI.MainBar
                local Cutter = MainBar.Cutter
                local Temp1, Temp2, Temp3 = false, false, false
                
                local InputConnection = UserInputService.InputBegan:Connect(function(InputObject)
                    if not Temp1 then
                        if InputObject.UserInputType == Enum.UserInputType.MouseButton1 or InputObject.KeyCode == Enum.KeyCode.ButtonB then
                            if Temp2 then
                                Temp3 = true
                                return
                            end
                            Temp1 = true
                        end
                    end
                end)
                
                local Counter = .005
                local Time = 0
                
                while Counter < 1 and (User:GetAttribute('NANAMIAIM') and not (Temp3 or Temp1)) do
                    local Timed = task.wait()
                    local Division = Timed / TimeDur
                    local Difference = math.abs(.7 - Counter)
                    
                    if Counter < .7 then
                        MainBar.Rotation = Counter/.7*80-80
                    else
                        MainBar.Rotation = 0
                    end
                    
                    if Difference < .025 then
                        Division = Division / 8
                    elseif Difference < .05 then
                        Division = Division / 4
                    end
                    
                    Counter = Counter + Division
                    Cutter.Position = UDim2.fromScale(Counter, .5)
                    
                    if Difference < .02 then
                        Temp2 = true
                        Temp3 = true
                    else
                        Temp2 = false
                    end
                    
                    if Temp2 then
                        Time = Time + Timed
                    end
                end
                
                InputConnection:Disconnect()
                
                if Temp3 and User:GetAttribute('NANAMIAIM') then
                    Cutter.Position = UDim2.fromScale(.7, .5)
                    TweenService:Create(TempGUI, TweenInfo.new(.25), {['Size'] = UDim2.new(10, 200, 10, 200)}):Play()
                    Cutter.Size = UDim2.fromScale(.016, 12)
                    TweenService:Create(Cutter, TweenInfo.new(0.5, Enum.EasingStyle.Linear), {
                        ['Size'] = UDim2.fromScale(0, 24),
                        ['BackgroundColor3'] = Color3.new(1, 0, 0),
                        ['BackgroundTransparency'] = 1
                    }):Play()
                    
                    local ColorCorrection = Instance.new("ColorCorrectionEffect", game.Lighting)
                    ColorCorrection.TintColor = Color3.new(0, 0, 0)
                    Debris:AddItem(ColorCorrection, .15)
                end
                
                Debris:AddItem(TempGUI, .5)
                return Temp3
            end
        end
    end,
})

local KokushiboSection = PerfectTimingTab:CreateSection("Kokushibo")

local KokushiboAutoPerfect = PerfectTimingTab:CreateToggle({
    Name = "Kokushibo | Auto Perfect",
    CurrentValue = false,
    Flag = "KokushiboAutoPerfect",
    Callback = function(Value)
        if Value then
            -- Hook the Kokushibo timing check
            local KokushiboCheck = ReplicatedStorage:WaitForChild("KokushiboCheck")
            
            KokushiboCheck.OnClientInvoke = function(timeTotal, timeWindow)
                local waitTime = timeTotal * 2
                local windowTime = timeWindow * 2
                local perfectTime = waitTime - windowTime
                
                local FrenchKokushibo = ReplicatedStorage.FrenchKokushibo:Clone()
                for _, frame in pairs(FrenchKokushibo:GetChildren()) do
                    TweenService:Create(frame, TweenInfo.new(perfectTime, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
                        Position = UDim2.new(
                            frame.Position.X.Scale + math.random(1, 2) / 60 * (math.random(0, 1) == 0 and -1 or 1),
                            0,
                            frame.Position.Y.Scale + math.random(1, 3) / 90 * (math.random(0, 1) == 0 and -1 or 1),
                            0
                        )
                    }):Play()
                end
                FrenchKokushibo.Parent = LocalPlayer.PlayerGui
                
                -- Auto click at perfect timing
                task.wait(perfectTime + 0.01) -- Small delay for perfect timing
                
                -- Trigger the perfect click
                for _, frame in pairs(FrenchKokushibo:GetChildren()) do
                    TweenService:Create(frame.UIScale, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
                        Scale = 1.2
                    }):Play()
                    TweenService:Create(frame, TweenInfo.new(0.75, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
                        ImageTransparency = 1
                    }):Play()
                    frame.ImageColor3 = Color3.new(0.345098, 0.847059, 1)
                end
                
                task.wait(windowTime)
                FrenchKokushibo:Destroy()
                
                return true -- Always return success
            end
        else
            -- Restore original function (would need to save original first)
        end
    end,
})

local BlackFlashSection = PerfectTimingTab:CreateSection("Black Flash")

local YujiAutoBlackFlash = PerfectTimingTab:CreateToggle({
    Name = "Auto Black Flash",
    CurrentValue = false,
    Flag = "AutoBlackFlash",
    Callback = function(Value)
        if Value then
            -- Hook the Black Flash timing check
            local BlackFlashEvent = ReplicatedStorage:WaitForChild("BlackFlashCheck")
            
            BlackFlashEvent.OnClientInvoke = function(totalTime, windowTime)
                local waitTime = totalTime - windowTime
                
                -- Camera zoom in
                TweenService:Create(workspace.CurrentCamera, TweenInfo.new(waitTime, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
                    FieldOfView = 6
                }):Play()
                
                -- Wait for perfect timing
                task.wait(waitTime + 0.01)
                
                -- Auto click at perfect moment (this sets the flag that we clicked)
                local clickSuccess = true
                
                -- Camera zoom out
                if windowTime > 0 then
                    TweenService:Create(workspace.CurrentCamera, TweenInfo.new(windowTime), {
                        FieldOfView = 70
                    }):Play()
                    task.wait(windowTime)
                end
                
                -- Reset camera
                workspace.CurrentCamera.FieldOfView = 70
                task.spawn(function()
                    task.wait(0.1)
                    workspace.CurrentCamera.FieldOfView = 70
                end)
                
                return true -- Always return perfect timing
            end
        else
            -- Would need to restore original function
        end
    end,
})

local AsunaTechSection = PerfectTimingTab:CreateSection("Asuna")

local AsunaTechLabel = PerfectTimingTab:CreateLabel("extends combo when use switch move")

local AsunaTechToggle = PerfectTimingTab:CreateToggle({
    Name = "Asuna Tech",
    CurrentValue = false,
    Flag = "AsunaTech",
    Callback = function(Value)
        if Value then
            local dodge = nil
            local nextDodgeSearch = 0
            
            local function findDodgeFunc()
                if dodge then return dodge end
                if tick() < nextDodgeSearch then return nil end
                
                nextDodgeSearch = tick() + 2
                
                for _, v in getgc() do
                    if type(v) == "function" and islclosure(v) then
                        local info = debug.getinfo(v)
                        if info.name == "dodge" then
                            local ok, env = pcall(getfenv, v)
                            if ok and env.script and env.script.Name == "LocalCharacterScript" then
                                dodge = v
                                return v
                            end
                        end
                    end
                end
                
                return nil
            end
            
            -- Reset dodge func on character respawn
            if Connections['AsunaTechCharAdded'] then
                Connections['AsunaTechCharAdded']:Disconnect()
            end
            Connections['AsunaTechCharAdded'] = LocalPlayer.CharacterAdded:Connect(function()
                dodge = nil
            end)
            
            -- Main loop for auto tech
            if Connections['AsunaTech'] then
                Connections['AsunaTech']:Disconnect()
            end
            Connections['AsunaTech'] = RunService.RenderStepped:Connect(function()
                local func = findDodgeFunc()
                if not func then return end
                
                -- Remove dash cooldown for auto tech
                if debug.getupvalue(func, 9) then
                    debug.setupvalue(func, 9, false)
                end
                if not debug.getupvalue(func, 4) then
                    debug.setupvalue(func, 4, true)
                end
            end)
        else
            if Connections['AsunaTech'] then
                Connections['AsunaTech']:Disconnect()
                Connections['AsunaTech'] = nil
            end
            if Connections['AsunaTechCharAdded'] then
                Connections['AsunaTechCharAdded']:Disconnect()
                Connections['AsunaTechCharAdded'] = nil
            end
        end
    end,
})

local MrPresidentSection = ExploitsTab:CreateSection("Mr President")

local MrPresidentToggle = ExploitsTab:CreateToggle({
    Name = "Mr President | Coco Jumbo",
    CurrentValue = false,
    Flag = "MrPresidentCocoJumbo",
    Callback = function(Value)
        characterProjectiles.MrPresidentCocoJumbo = Value
    end,
})

local IchigoTSSection = ExploitsTab:CreateSection("Ichigo TS")

local IchigoTSGetsugaToggle = ExploitsTab:CreateToggle({
    Name = "Ichigo TS | Getsuga",
    CurrentValue = false,
    Flag = "IchigoTSGetsuga",
    Callback = function(Value)
        characterProjectiles.IchigoTSGetsuga = Value
    end,
})

-- Misc Tab

local DashesSection = MiscTab:CreateSection("Dashes")

local DashesInfoLabel = MiscTab:CreateLabel("You can use all these dashes with any character reset to pick a new dash")

local DisableTempMeterSection = MiscTab:CreateSection("Utilities")

local DisableTempMeterToggle = MiscTab:CreateToggle({
    Name = "Disable Temp Meter",
    CurrentValue = false,
    Flag = "DisableTempMeter",
    Callback = function(Value)
        if Value then
            if Connections['DisableTempMeter'] then
                Connections['DisableTempMeter']:Disconnect()
            end
            
            local alternateValue = 10
            
            Connections['DisableTempMeter'] = task.spawn(function()
                while task.wait(0.01) do
                    if not Connections['DisableTempMeter'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if Live then
                            local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                            if playerFolder then
                                local tempMeter = playerFolder:FindFirstChild("TemperatureMeter")
                                if tempMeter and tempMeter:IsA("IntConstrainedValue") then
                                    -- Alternate between 10 and 15
                                    tempMeter.Value = alternateValue
                                    alternateValue = alternateValue == 10 and 15 or 10
                                end
                            end
                        end
                    end)
                end
            end)
        else
            if Connections['DisableTempMeter'] then
                pcall(function() task.cancel(Connections['DisableTempMeter']) end)
                Connections['DisableTempMeter'] = nil
            end
        end
    end,
})

local GojoBlueBuffSection = MiscTab:CreateSection("Gojo Blue Buff")

local GojoBlueBuffToggle = MiscTab:CreateToggle({
    Name = "blue buff",
    CurrentValue = false,
    Flag = "GojoBlue Buff",
    Callback = function(Value)
        if Value then
            if Connections['GojoBlue Buff'] then
                Connections['GojoBlue Buff']:Disconnect()
            end
            
            -- Keep BlueBuff enabled continuously
            Connections['GojoBlue Buff'] = RunService.RenderStepped:Connect(function()
                pcall(function()
                    local Live = workspace:FindFirstChild("Live")
                    if not Live then return end
                    
                    -- Use LocalPlayer.Name to find the folder
                    local charFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if not charFolder then return end
                    
                    -- Find or create the BlueBuff Highlight
                    local blueBuff = charFolder:FindFirstChild("BlueBuff")
                    if not blueBuff then
                        blueBuff = Instance.new("Highlight")
                        blueBuff.Name = "BlueBuff"
                        blueBuff.FillColor = Color3.fromRGB(255, 0, 0)
                        blueBuff.OutlineColor = Color3.fromRGB(50, 50, 255)
                        blueBuff.FillTransparency = 1
                        blueBuff.OutlineTransparency = 0
                        blueBuff.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                        blueBuff.Parent = charFolder
                    end
                    
                    if blueBuff:IsA("Highlight") then
                        blueBuff.Enabled = true
                    end
                end)
            end)
        else
            if Connections['GojoBlue Buff'] then
                Connections['GojoBlue Buff']:Disconnect()
                Connections['GojoBlue Buff'] = nil
            end
            
            -- Disable BlueBuff when toggled off
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if not Live then return end
                
                local charFolder = Live:FindFirstChild(LocalPlayer.Name)
                if not charFolder then return end
                
                local blueBuff = charFolder:FindFirstChild("BlueBuff")
                if blueBuff and blueBuff:IsA("Highlight") then
                    blueBuff.Enabled = false
                end
            end)
        end
    end,
})

local SuperDummySection = MiscTab:CreateSection("Super Dummy 10k Points")

local SuperDummyLabel = MiscTab:CreateLabel("run on super dummy account")
local SuperDummyLabel2 = MiscTab:CreateLabel("toggle on then hit dummy once for 10k has to be on mode")

local SuperDummy10kToggle = MiscTab:CreateToggle({
    Name = "super dummy 10k Points",
    CurrentValue = false,
    Flag = "SuperDummy10k",
    Callback = function(Value)
        if Value then
            if Connections['SuperDummy10k'] then
                Connections['SuperDummy10k']:Disconnect()
            end
            
            -- Break joints whenever health changes
            Connections['SuperDummy10k'] = LocalPlayer.Character.Humanoid.HealthChanged:Connect(function()
                LocalPlayer.Character:BreakJoints()
            end)
            
            -- Reconnect on respawn
            if Connections['SuperDummy10kRespawn'] then
                Connections['SuperDummy10kRespawn']:Disconnect()
            end
            Connections['SuperDummy10kRespawn'] = LocalPlayer.CharacterAdded:Connect(function(char)
                task.wait(0.5)
                local hum = char:WaitForChild("Humanoid", 5)
                if hum and Connections['SuperDummy10k'] then
                    Connections['SuperDummy10k']:Disconnect()
                    Connections['SuperDummy10k'] = hum.HealthChanged:Connect(function()
                        char:BreakJoints()
                    end)
                end
            end)
        else
            if Connections['SuperDummy10k'] then
                Connections['SuperDummy10k']:Disconnect()
                Connections['SuperDummy10k'] = nil
            end
            if Connections['SuperDummy10kRespawn'] then
                Connections['SuperDummy10kRespawn']:Disconnect()
                Connections['SuperDummy10kRespawn'] = nil
            end
        end
    end,
})

local RollbackSection = MiscTab:CreateSection("Account Rollback")

local RollbackLabel = MiscTab:CreateLabel("use if you get bad skin/prestige")
local RollbackLabel2 = MiscTab:CreateLabel("reset music settings after")

local RollbackButton = MiscTab:CreateButton({
    Name = "Rollback Account",
    Callback = function()
        local success, err = pcall(function()
            local MuteAwakMusic = ReplicatedStorage:FindFirstChild('MuteAwakMusic')
            if MuteAwakMusic then
                for i = 1, 10 do
                    MuteAwakMusic:FireServer('\255')
                    task.wait()
                end
                LocalPlayer:Kick('Attempting rollback, rejoin server')
            else
                print("[xes] MuteAwakMusic event not found")
            end
        end)
        
        if not success then
            print("[xes] Rollback error:", err)
        end
    end,
})

local AntiSnailToggle = MiscTab:CreateToggle({
    Name = "Anti Weather Report Snail",
    CurrentValue = false,
    Flag = "AntiSnail",
    Callback = function(Value)
        if Value then
            if Connections['AntiSnail'] then
                Connections['AntiSnail']:Disconnect()
            end
            
            if Connections['AntiSnailListener'] then
                Connections['AntiSnailListener']:Disconnect()
            end
            
            Connections['AntiSnail'] = task.spawn(function()
                while task.wait(0.01) do
                    if not Connections['AntiSnail'] then break end
                    
                    pcall(function()
                        local becomeSnail = ReplicatedStorage:FindFirstChild("BecomeSnail")
                        if becomeSnail then
                            becomeSnail:Destroy()
                        end
                    end)
                end
            end)
            
            -- Also set up listener to destroy it immediately when it gets added
            Connections['AntiSnailListener'] = ReplicatedStorage.ChildAdded:Connect(function(child)
                if child.Name == "BecomeSnail" and Connections['AntiSnail'] then
                    task.wait()
                    child:Destroy()
                end
            end)
        else
            if Connections['AntiSnail'] then
                pcall(function() task.cancel(Connections['AntiSnail']) end)
                Connections['AntiSnail'] = nil
            end
            
            if Connections['AntiSnailListener'] then
                Connections['AntiSnailListener']:Disconnect()
                Connections['AntiSnailListener'] = nil
            end
        end
    end,
})

local NoDashCooldownToggle = MiscTab:CreateToggle({
    Name = "No Dash Cooldown",
    CurrentValue = false,
    Flag = "NoDashCooldown",
    Callback = function(Value)
        if Value then
            local dodge = nil
            local nextDodgeSearch = 0
            
            local function findDodgeFunc()
                if dodge then return dodge end
                if tick() < nextDodgeSearch then return nil end
                
                nextDodgeSearch = tick() + 2
                
                for _, v in getgc() do
                    if type(v) == "function" and islclosure(v) then
                        local info = debug.getinfo(v)
                        if info.name == "dodge" then
                            local ok, env = pcall(getfenv, v)
                            if ok and env.script and env.script.Name == "LocalCharacterScript" then
                                dodge = v
                                return v
                            end
                        end
                    end
                end
                
                return nil
            end
            
            -- Reset dodge func on character respawn
            if Connections['NoDashCooldownCharAdded'] then
                Connections['NoDashCooldownCharAdded']:Disconnect()
            end
            Connections['NoDashCooldownCharAdded'] = LocalPlayer.CharacterAdded:Connect(function()
                dodge = nil
            end)
            
            -- Main loop
            if Connections['NoDashCooldown'] then
                Connections['NoDashCooldown']:Disconnect()
            end
            Connections['NoDashCooldown'] = RunService.RenderStepped:Connect(function()
                local func = findDodgeFunc()
                if not func then return end
                
                -- Remove dash cooldown
                if debug.getupvalue(func, 9) then
                    debug.setupvalue(func, 9, false)
                end
                if not debug.getupvalue(func, 4) then
                    debug.setupvalue(func, 4, true)
                end
            end)
        else
            if Connections['NoDashCooldown'] then
                Connections['NoDashCooldown']:Disconnect()
                Connections['NoDashCooldown'] = nil
            end
            if Connections['NoDashCooldownCharAdded'] then
                Connections['NoDashCooldownCharAdded']:Disconnect()
                Connections['NoDashCooldownCharAdded'] = nil
            end
        end
    end,
})

local TimeskipSpamToggle = MiscTab:CreateToggle({
    Name = "spam timeskip",
    CurrentValue = false,
    Flag = "TimeskipSpam",
    Callback = function(Value)
        if Value then
            if Connections['TimeskipSpam'] then
                Connections['TimeskipSpam']:Disconnect()
            end
            
            Connections['TimeskipSpam'] = RunService.RenderStepped:Connect(function()
                pcall(function()
                    local char = LocalPlayer.Character
                    if not char then return end
                    
                    local hrp = char:FindFirstChild("HumanoidRootPart")
                    if not hrp then return end
                    
                    local backpack = LocalPlayer:FindFirstChild("Backpack")
                    if not backpack then return end
                    
                    local serverTraits = backpack:FindFirstChild("ServerTraits")
                    if not serverTraits then return end
                    
                    local input = serverTraits:FindFirstChild("Input")
                    if not input then return end
                    
                    -- Spam dodge with current position
                    local currentCFrame = hrp.CFrame
                    local args = {
                        "dodge",
                        {
                            tpos = currentCFrame,
                            newpos = currentCFrame.Position,
                            pos = currentCFrame
                        }
                    }
                    
                    input:FireServer(unpack(args))
                end)
            end)
        else
            if Connections['TimeskipSpam'] then
                Connections['TimeskipSpam']:Disconnect()
                Connections['TimeskipSpam'] = nil
            end
        end
    end,
})

-- Dash Helper Function
local function setDash(dashName)
    pcall(function()
        local char = LocalPlayer.Character
        if not char then return end
        
        local Live = workspace:FindFirstChild("Live")
        if not Live then return end
        
        -- Find the EXISTING character folder (the game creates this, not us)
        -- It's usually the character model name, not the player name
        local charFolder = nil
        for _, folder in pairs(Live:GetChildren()) do
            if folder:IsA("Model") and folder:FindFirstChild("HumanoidRootPart") then
                -- This is the actual character model
                charFolder = folder
                break
            end
        end
        
        if not charFolder then return end
        
        -- Clear all existing dashes
        for _, child in pairs(charFolder:GetChildren()) do
            if child:IsA("Folder") and (
                child.Name:find("Dodge") or 
                child.Name == "AccelDodges" or
                child.Name == "ROKUSHIKI" or
                child.Name == "FLOATPASSIVE" or
                child.Name == "Vanish"
            ) then
                child:Destroy()
            end
        end
        
        -- Add new dash if specified
        if dashName then
            local dash = Instance.new("Folder")
            dash.Name = dashName
            dash.Parent = charFolder
        end
    end)
end

local KiritsuguDashesToggle = MiscTab:CreateToggle({
    Name = "Kiritsugu Dashes",
    CurrentValue = false,
    Flag = "KiritsuguDashes",
    Callback = function(Value)
        if Value then
            if Connections['KiritsuguDashes'] then
                task.cancel(Connections['KiritsuguDashes'])
            end
            
            Connections['KiritsuguDashes'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['KiritsuguDashes'] then break end
                    setDash("AccelDodges")
                end
            end)
        else
            if Connections['KiritsuguDashes'] then
                task.cancel(Connections['KiritsuguDashes'])
                Connections['KiritsuguDashes'] = nil
            end
            setDash(nil) -- Remove dash
        end
    end,
})

local UltraInstinctDashToggle = MiscTab:CreateToggle({
    Name = "Ultra Instinct Dash",
    CurrentValue = false,
    Flag = "UltraInstinctDash",
    Callback = function(Value)
        if Value then
            if Connections['UltraInstinctDash'] then
                Connections['UltraInstinctDash']:Disconnect()
            end
            
            Connections['UltraInstinctDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['UltraInstinctDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureUIDodge()
                            if not playerFolder:FindFirstChild("UIDodge") then
                                local uiDodge = Instance.new("Folder")
                                uiDodge.Name = "UIDodge"
                                uiDodge.Parent = playerFolder
                            end
                        end
                        
                        ensureUIDodge()
                        
                        if not Connections['UIDodgeListener'] then
                            Connections['UIDodgeListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "UIDodge" and Connections['UltraInstinctDash'] then
                                    task.wait()
                                    ensureUIDodge()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['UltraInstinctDash'] then
                pcall(function() task.cancel(Connections['UltraInstinctDash']) end)
                Connections['UltraInstinctDash'] = nil
            end
            
            if Connections['UIDodgeListener'] then
                Connections['UIDodgeListener']:Disconnect()
                Connections['UIDodgeListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local uiDodge = playerFolder:FindFirstChild("UIDodge")
                        if uiDodge then
                            uiDodge:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local FloatPassiveToggle = MiscTab:CreateToggle({
    Name = "Float Passive",
    CurrentValue = false,
    Flag = "FloatPassive",
    Callback = function(Value)
        if Value then
            if Connections['FloatPassive'] then
                Connections['FloatPassive']:Disconnect()
            end
            
            Connections['FloatPassive'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['FloatPassive'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureFloatPassive()
                            if not playerFolder:FindFirstChild("FLOATPASSIVE") then
                                local floatPassive = Instance.new("Folder")
                                floatPassive.Name = "FLOATPASSIVE"
                                floatPassive.Parent = playerFolder
                            end
                        end
                        
                        ensureFloatPassive()
                        
                        if not Connections['FloatPassiveListener'] then
                            Connections['FloatPassiveListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "FLOATPASSIVE" and Connections['FloatPassive'] then
                                    task.wait()
                                    ensureFloatPassive()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['FloatPassive'] then
                pcall(function() task.cancel(Connections['FloatPassive']) end)
                Connections['FloatPassive'] = nil
            end
            
            if Connections['FloatPassiveListener'] then
                Connections['FloatPassiveListener']:Disconnect()
                Connections['FloatPassiveListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local floatPassive = playerFolder:FindFirstChild("FLOATPASSIVE")
                        if floatPassive then
                            floatPassive:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local BakugoDashToggle = MiscTab:CreateToggle({
    Name = "Bakugo Dash",
    CurrentValue = false,
    Flag = "BakugoDash",
    Callback = function(Value)
        if Value then
            if Connections['BakugoDash'] then
                Connections['BakugoDash']:Disconnect()
            end
            
            Connections['BakugoDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['BakugoDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureExplodDodge()
                            if not playerFolder:FindFirstChild("ExplodDodge") then
                                local explodDodge = Instance.new("Folder")
                                explodDodge.Name = "ExplodDodge"
                                explodDodge.Parent = playerFolder
                            end
                        end
                        
                        ensureExplodDodge()
                        
                        if not Connections['ExplodDodgeListener'] then
                            Connections['ExplodDodgeListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "ExplodDodge" and Connections['BakugoDash'] then
                                    task.wait()
                                    ensureExplodDodge()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['BakugoDash'] then
                pcall(function() task.cancel(Connections['BakugoDash']) end)
                Connections['BakugoDash'] = nil
            end
            
            if Connections['ExplodDodgeListener'] then
                Connections['ExplodDodgeListener']:Disconnect()
                Connections['ExplodDodgeListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local explodDodge = playerFolder:FindFirstChild("ExplodDodge")
                        if explodDodge then
                            explodDodge:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local WuxianDashToggle = MiscTab:CreateToggle({
    Name = "Wuxian Dash",
    CurrentValue = false,
    Flag = "WuxianDash",
    Callback = function(Value)
        if Value then
            if Connections['WuxianDash'] then
                Connections['WuxianDash']:Disconnect()
            end
            
            Connections['WuxianDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['WuxianDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureWuxianDodge()
                            if not playerFolder:FindFirstChild("WuxianDodge") then
                                local wuxianDodge = Instance.new("Folder")
                                wuxianDodge.Name = "WuxianDodge"
                                wuxianDodge.Parent = playerFolder
                            end
                        end
                        
                        ensureWuxianDodge()
                        
                        if not Connections['WuxianDodgeListener'] then
                            Connections['WuxianDodgeListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "WuxianDodge" and Connections['WuxianDash'] then
                                    task.wait()
                                    ensureWuxianDodge()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['WuxianDash'] then
                pcall(function() task.cancel(Connections['WuxianDash']) end)
                Connections['WuxianDash'] = nil
            end
            
            if Connections['WuxianDodgeListener'] then
                Connections['WuxianDodgeListener']:Disconnect()
                Connections['WuxianDodgeListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local wuxianDodge = playerFolder:FindFirstChild("WuxianDodge")
                        if wuxianDodge then
                            wuxianDodge:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local GeppoDashToggle = MiscTab:CreateToggle({
    Name = "Geppo Dash",
    CurrentValue = false,
    Flag = "GeppoDash",
    Callback = function(Value)
        if Value then
            if Connections['GeppoDash'] then
                Connections['GeppoDash']:Disconnect()
            end
            
            Connections['GeppoDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['GeppoDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureRokushiki()
                            if not playerFolder:FindFirstChild("ROKUSHIKI") then
                                local rokushiki = Instance.new("Folder")
                                rokushiki.Name = "ROKUSHIKI"
                                rokushiki.Parent = playerFolder
                            end
                        end
                        
                        ensureRokushiki()
                        
                        if not Connections['RokushikiListener'] then
                            Connections['RokushikiListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "ROKUSHIKI" and Connections['GeppoDash'] then
                                    task.wait()
                                    ensureRokushiki()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['GeppoDash'] then
                pcall(function() task.cancel(Connections['GeppoDash']) end)
                Connections['GeppoDash'] = nil
            end
            
            if Connections['RokushikiListener'] then
                Connections['RokushikiListener']:Disconnect()
                Connections['RokushikiListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local rokushiki = playerFolder:FindFirstChild("ROKUSHIKI")
                        if rokushiki then
                            rokushiki:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local UssopDashToggle = MiscTab:CreateToggle({
    Name = "Ussop Dash",
    CurrentValue = false,
    Flag = "UssopDash",
    Callback = function(Value)
        if Value then
            if Connections['UssopDash'] then
                Connections['UssopDash']:Disconnect()
            end
            
            Connections['UssopDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['UssopDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureUsopDodge()
                            if not playerFolder:FindFirstChild("UsopDodge") then
                                local usopDodge = Instance.new("Folder")
                                usopDodge.Name = "UsopDodge"
                                usopDodge.Parent = playerFolder
                            end
                        end
                        
                        ensureUsopDodge()
                        
                        if not Connections['UsopDodgeListener'] then
                            Connections['UsopDodgeListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "UsopDodge" and Connections['UssopDash'] then
                                    task.wait()
                                    ensureUsopDodge()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['UssopDash'] then
                pcall(function() task.cancel(Connections['UssopDash']) end)
                Connections['UssopDash'] = nil
            end
            
            if Connections['UsopDodgeListener'] then
                Connections['UsopDodgeListener']:Disconnect()
                Connections['UsopDodgeListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local usopDodge = playerFolder:FindFirstChild("UsopDodge")
                        if usopDodge then
                            usopDodge:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

local AwakeningDashToggle = MiscTab:CreateToggle({
    Name = "Awakening Dash",
    CurrentValue = false,
    Flag = "AwakeningDash",
    Callback = function(Value)
        if Value then
            if Connections['AwakeningDash'] then
                Connections['AwakeningDash']:Disconnect()
            end
            
            Connections['AwakeningDash'] = task.spawn(function()
                while task.wait(0.05) do
                    if not Connections['AwakeningDash'] then break end
                    
                    pcall(function()
                        local Live = workspace:FindFirstChild("Live")
                        if not Live then
                            Live = Instance.new("Folder")
                            Live.Name = "Live"
                            Live.Parent = workspace
                        end
                        
                        local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                        if not playerFolder then
                            playerFolder = Instance.new("Folder")
                            playerFolder.Name = LocalPlayer.Name
                            playerFolder.Parent = Live
                        end
                        
                        local function ensureVanish()
                            if not playerFolder:FindFirstChild("Vanish") then
                                local vanish = Instance.new("Folder")
                                vanish.Name = "Vanish"
                                vanish.Parent = playerFolder
                            end
                        end
                        
                        ensureVanish()
                        
                        if not Connections['VanishListener'] then
                            Connections['VanishListener'] = playerFolder.ChildRemoved:Connect(function(child)
                                if child.Name == "Vanish" and Connections['AwakeningDash'] then
                                    task.wait()
                                    ensureVanish()
                                end
                            end)
                        end
                    end)
                end
            end)
        else
            if Connections['AwakeningDash'] then
                pcall(function() task.cancel(Connections['AwakeningDash']) end)
                Connections['AwakeningDash'] = nil
            end
            
            if Connections['VanishListener'] then
                Connections['VanishListener']:Disconnect()
                Connections['VanishListener'] = nil
            end
            
            pcall(function()
                local Live = workspace:FindFirstChild("Live")
                if Live then
                    local playerFolder = Live:FindFirstChild(LocalPlayer.Name)
                    if playerFolder then
                        local vanish = playerFolder:FindFirstChild("Vanish")
                        if vanish then
                            vanish:Destroy()
                        end
                    end
                end
            end)
        end
    end,
})

-- Initialize auto skip bans (works for all modes)
SetupAutoSkipBans()
